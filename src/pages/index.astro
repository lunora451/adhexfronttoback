---
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <h1>this is a try for php front to back</h1>

  <button class="getUser"> get Users</button>
  <div class="getUsers"></div>
</Layout>

<script>
  const button = document.querySelector(".getUser");

  button.addEventListener("click", getUsers);

  async function getUsers() {
    try {
      //changer ca et go
      console.log("start getUsers");
      const response = await fetch(
        "https://bisque-nightingale-969900.hostingersite.com/users"
      );

      if (!response.ok) {
        throw new Error("Erreur HTTP: " + response.status);
      }

      const users = await response.json();
      console.log(users);
      // displayUsers(users);
    } catch (error) {
      console.error("Erreur:", error);
      document.querySelector(".getUsers").innerHTML =
        '<p style="color: red;">Erreur lors du chargement</p>';
    }
  }

  // function displayUsers(users){
  //   document.querySelector(".getUsers").append(elem.nom)
  // }
</script>
